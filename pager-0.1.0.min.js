define("text!lib/view/item.tmpl",[],function(){return'<li data-page="<?=this.page?>" class="<?=this.classname?>"><a href="<?=this.link?>"><?=this.text?></a></li>'}),define("text!lib/view/item-disable.tmpl",[],function(){return'<li class="disable <?=this.classname?>"><span><?=this.text?></span></li>'}),define("text!lib/view/item-current.tmpl",[],function(){return'<li class="active <?=this.classname?>"><span><?=this.text?></span></li>'}),define("text!lib/view/pager.tmpl",[],function(){return"<ul>\r\n\t<?=this.html?>\r\n</ul>"}),define("lib/pager",["require","exports","module","dtools","template","text!./view/item.tmpl","text!./view/item-disable.tmpl","text!./view/item-current.tmpl","text!./view/pager.tmpl"],function(t,e,i){var n=t("dtools"),s=t("template"),a=new s(t("text!./view/item.tmpl")),l=new s(t("text!./view/item-disable.tmpl")),r=new s(t("text!./view/item-current.tmpl")),h=new s(t("text!./view/pager.tmpl")),p=function(t){this._initPager(t)};p.prototype={_initPager:function(t){this.options=n.mix({total:0,perpage:10,container:"",page:1},t),n.EventEmitter.call(this),this.html="",this.page=this.options.page,this.totalPage=Math.ceil(this.options.total/this.options.perpage),this.panel=n.$c("div",null,"pager"),this._initUI(),this._initEvents()},_initUI:function(){this.panel.appendChild(h.render({html:this.get()},!0)),$(this.options.container).html(this.panel)},_initEvents:function(){var t=this;$(this.options.container).on("click","li",function(e){e.preventDefault();var i=$(this).attr("data-page");void 0!==i&&(t.setPage(i),t.emit("goto",{page:i}))})},buildItem:function(t){var e;return e=t==this.page?r.render({text:this.page}):t==-1?l.render({text:"..",link:"#"}):a.render({text:t,page:t,link:"#"})},setPage:function(t){this.page=parseInt(t),$(this.panel).html(h.render({html:this.get()},!0))},setTotal:function(t){this.total=t,this.totalPage=Math.ceil(this.total/this.options.perpage),$(this.panel).html(h.render({html:this.get()},!0))},render:function(){var t="";if(this.totalPage<=1)return this.html=t,t;if(t+=1==this.page?l.render({text:"上一页",classname:"btn btn-prev"}):a.render({text:"上一页",page:this.page-1,link:"#",classname:"btn btn-prev"}),this.totalPage<=11)for(var e=1;e<=this.totalPage;e++)t+=e==this.page?r.render({text:e}):a.render({page:e,text:e,link:"#"});else{var i=this.page;this.page<3&&(i=3),this.page>this.totalPage-2&&(i=this.totalPage-2);var n=0,s=1,h=i-1,p=i+1,o=this.totalPage,m=[[],[],[],[]];do h>s?(m[0].push(this.buildItem(s)),m[1].unshift(this.buildItem(h))):s==h&&m[0].push(this.buildItem(s)),p==o?m[2].push(this.buildItem(p)):o>p&&(m[2].push(this.buildItem(p)),m[3].unshift(this.buildItem(o))),1==n&&(Math.abs(s-h)>1&&m[0].push(this.buildItem(-1)),Math.abs(p-o)>1&&m[2].push(this.buildItem(-1))),s++,h--,p++,o--,n++;while(n<2);var u=m[0].concat(m[1],this.buildItem(i),m[2],m[3]);t+=u.join("")}t+=this.page==this.totalPage?l.render({text:"下一页",classname:"btn btn-next"}):a.render({text:"下一页",page:this.page+1,link:"#",classname:"btn btn-next"}),this.html=t},get:function(){return this.render(),this.html}},n.extend(p,n.EventEmitter),i.exports=p}),define("pager",["require","exports","module","./lib/pager"],function(t,e,i){return t("./lib/pager")});